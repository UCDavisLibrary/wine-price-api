version: '2'

volumes:
  winedb:

services:
  postgres:
    build: ./postgres
    volumes:
      - winedb:/var/lib/postgresql/data
      - ./:/app
    environment:
      POSTGRES_DB: wine_price
      POSTGRES_USER: postgres

  pgt:
    build: ./pgt
    ports:
      - "8080:80"
    environment:
      - PGT_JWT=SECRET_HERE
      - PGT_HOST=wine-api.library.ucdavis.edu
    links:
      - postgres:postgres
    depends_on:
      - postgres

  sync:
    build: ./firebase-sync
    depends_on:
      - postgres
